<navigation-bar title="全国重名查询" back="{{false}}" color="#4F8CFF" background="#F7FAFF"></navigation-bar>
<scroll-view class="bg-main" scroll-y="true" style="height: 100vh;">
  <view class="card">
    <view class="form-group">
      <label>查询姓名</label>
      <input class="input" placeholder="请输入姓名" maxlength="10" bindinput="onInput" value="{{name}}" />
    </view>
    <button class="btn-primary" bindtap="onQuery">查询重名</button>
  </view>

  <view wx:if="{{result}}">
    <view class="card stats-card">
      <view class="page-title">全国重名统计</view>
      <view class="total-count">{{result.total}}</view>
      <view class="same-tip">与 <text style="font-weight:600;">{{result.name}}</text> 同名人数</view>
      <view class="gender-stats">
        <view class="gender-stat male">
          <view class="gender-icon">♂</view>
          <view class="gender-label">男性</view>
          <view class="gender-count">{{result.male}}</view>
        </view>
        <view class="gender-stat female">
          <view class="gender-icon">♀</view>
          <view class="gender-label">女性</view>
          <view class="gender-count">{{result.female}}</view>
        </view>
      </view>
    </view>
    <view class="card">
      <view style="margin-bottom: 15rpx; font-weight: bold; font-size: 28rpx;">重名分布情况</view>
      <view style="margin-bottom: 10rpx;"><text style="font-weight:600;">主要分布地区：</text>{{result.regions}}</view>
      <view><text style="font-weight:600;">同名年代分布：</text>{{result.years}}</view>
      <view class="bar-chart">
        <view class="bar">
          <view class="bar-inner" style="height: 120rpx; background: #5a7dee;"></view>
          <view class="bar-label">2015-2018</view>
        </view>
        <view class="bar">
          <view class="bar-inner" style="height: 90rpx; background: #6b8eff;"></view>
          <view class="bar-label">2019-2021</view>
        </view>
        <view class="bar">
          <view class="bar-inner" style="height: 140rpx; background: #5a7dee;"></view>
          <view class="bar-label">2022-2023</view>
        </view>
      </view>
    </view>
  </view>
  <view wx:if="{{loading}}" class="loading">
    <text>正在查询全国重名数据...</text>
  </view>
</scroll-view> 